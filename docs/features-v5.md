# Lunch Chooser v5.0 新機能ガイド

**バージョン**: 5.0（UX最適化版）  
**リリース日**: 2025-08-16  
**開発**: Claude Code Team

## 🎯 新機能一覧

### 1. ラーメン除外機能
- **場所**: 条件選択エリア（最上位）
- **機能**: ラーメン店を候補から自動除外
- **デフォルト**: ON（チェック済み）
- **用途**: ラーメンを避けたい場合の簡単フィルタ

### 2. お一人様モード
- **場所**: 条件選択エリア
- **正式名称**: 「履歴を考慮しない（お一人様の時ON）」
- **機能**: 
  - 週次ジャンル重複チェックを無効化
  - 履歴に保存されない
  - 個人利用時の制約なし選択
- **用途**: 一人でランチする際の自由な選択

### 3. 詳細情報表示機能
- **対象**: 通常店舗（新規開拓以外）
- **表示項目**:
  - 📝 **メモ**: 店舗の特記事項
  - 📍 **場所**: 店舗の詳細位置情報
  - 🔗 **URL**: 店舗の公式サイトリンク
- **データ源**: Google Sheets（C・D・E列）

### 4. 新規開拓専用UI
- **変更点**: ジャンル・評価表示を削除
- **新機能**: 3つの外部リンクボタン
  - 📍 **近隣のマップから探す**: Google Maps（BIZCORE御茶ノ水周辺）
  - 🚃 **秋葉原駅周辺で探す**: 食べログ（秋葉原エリア）
  - 🍵 **お茶の水駅周辺で探す**: 食べログ（お茶の水エリア）
- **セキュリティ**: 全リンクが新しいタブで安全に開く

### 5. スマートやり直し機能
- **改善点**: 条件選択画面に戻らない
- **動作**: 同じ条件で別の店舗を再選択
- **利点**: 効率的な操作、時間短縮

### 6. フルスクリーンローディング
- **表示**: 画面全体を覆うオーバーレイ
- **要素**:
  - 大きなスピナーアニメーション
  - 「データを読み込み中...」メッセージ
  - 「しばらくお待ちください」サブテキスト
- **ボタン制御**: ローディング中はボタン無効化
- **エラー対応**: ローディング中のボタン押下で警告表示

### 7. 設定画面の最適化
- **区分**: 星評価重み係数と新規開拓設定を明確分離
- **デフォルト値**:
  - 星評価重み係数: 1.5 → **2.0**
  - 新規開拓の星評価: 1.5⭐ → **3.0⭐**
- **説明**: 各設定に平文での詳細説明を追加
- **視覚化**: スタイリッシュなグラデーション区切り線
- **削除**: 履歴リセットボタン（不要機能として削除）

## 📊 Google Sheets データ構造

### 更新された列構造
| 列 | 項目 | 説明 |
|---|---|---|
| A | 店名 | レストラン名 |
| B | ジャンル | 料理ジャンル |
| C | メモ | 特記事項・備考 |
| D | 場所 | 詳細位置情報 |
| E | URL | 公式サイトURL |
| F | 近場 | 近場フラグ（○/空白） |
| G | 4人以上 | 大人数対応（○/空白） |
| H〜 | 評価者 | 各評価者の星評価（1-5） |

## 🎨 UI/UX改善ポイント

### デザイン向上
- **視覚的階層**: 条件項目の重要度順配置
- **情報密度**: 必要な情報のみ表示
- **操作性**: 直感的なボタン配置

### パフォーマンス
- **応答性**: フルスクリーンローディングで状態明確化
- **効率性**: スマートやり直しで操作回数削減

### アクセシビリティ
- **視認性**: コントラストの高い表示
- **操作性**: 大きなボタンとタッチ対応
- **情報**: 適切なラベルと説明文

## 🔧 技術的詳細

### セキュリティ維持
- 既存のA-評価セキュリティレベルを維持
- 新機能追加によるセキュリティ低下なし
- 全ての外部リンクで安全な遷移実装

### 互換性
- 既存のGoogle Apps Script連携継続
- Google Sheets構造の後方互換性維持
- ブラウザキャッシュ対応

## 📋 利用ガイド

### 基本的な使い方
1. **条件設定**: 上部のチェックボックスで条件選択
2. **ランチ決定**: 緑色のボタンをクリック
3. **結果確認**: 詳細情報を確認
4. **やり直し/確定**: 必要に応じて選択

### お一人様での利用
1. 「履歴を考慮しない」をチェック
2. 通常通りランチを決定
3. 履歴に保存されずに個人利用完了

### 新規開拓の利用
1. 新規開拓が選ばれた場合
2. 3つのリンクボタンから選択
3. 外部サイトで新しい店舗を探索

---

**注意**: v5.0の新機能を利用するには、Google Apps Scriptの再デプロイは不要です。GitHub Pagesの自動デプロイで全機能が利用可能です。